{"_default": {}, "tpl": {"3": {"content": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# init sys to utf-8\nimport sys\n\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\nfrom tinydb import TinyDB, Query\n\n# init db\ndb = TinyDB('gene.json')\n# init table\n{{ name }}s = db.table('{{ name }}')\n{{ name | capitalize }}= Query()\n\nfrom appJar import gui\n\n# init gui\napp = gui()\n\napp.startLabelFrame(\"{{ label }}\")\n\n\ndef edit(btn):\n    print \"edit: %s\" % btn, app.getListBox(btn)\n    if not app.getListBox(btn): return\n    name = app.getListBox(btn)[0]\n    {{ name }} = {{ name }}s.get({{ name | capitalize }}.name == name)\n    print {{ name }}\n    if {{ name }}:\n        {% for item in items %}\n        {% if item.type == \"string\" -%}\n        app.setEntry(\"{{ item.label }}\", {{ name }}[\"{{ item.name }}\"])\n        {%- endif %}\n        {% if item.type == \"text\" -%}\n        app.clearTextArea(\"{{ item.label }}\")\n        app.setTextArea(\"{{ item.label }}\", {{ name }}[\"{{ item.name }}\"])\n        {% endif %}\n        {% endfor %}\n\n\n\n\n\n\napp.addListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\napp.setListBoxSubmitFunction(\"{{ label }}\u5217\u8868\", edit)\n\n{% for item in items %}\n{% if item.type == \"string\" -%}\napp.addLabelEntry(\"{{ item.label }}\")\n{%- endif %}\n{% if item.type == \"text\" -%}\napp.addScrolledTextArea(\"{{ item.label }}\")\n{% endif %}\n{% endfor %}\n\n\ndef save(btn):\n    print \"save: %s\" % btn\n    {% for item in items %}\n    {% if item.type == \"string\" -%}\n    {{ item.name }} = app.getEntry(\"{{ item.label }}\")\n    {%- endif %}\n    {% if item.type == \"text\" -%}\n    {{ item.name }} = app.getTextArea(\"{{ item.label }}\")\n    {% endif %}\n    {% endfor %}\n\n\n    {{ name }} = {\n        {% for item in items -%}\n        \"{{ item.name }}\" : {{ item.name }}\n        {%- if not loop.last %},{% endif %}\n        {% endfor -%}\n    }\n\n\n    print {{ name }}\n    {{ name }}s.upsert({{ name }}, {{ name | capitalize }}.name == {{ name }}[\"name\"])\n    app.updateListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\n    print \"show all {{ name }}s:\"\n    for {{ name }} in {{ name }}s.all():\n        print {{ name }}\n\n\napp.addButton(\"\u4fdd\u5b58\", save)\n\n\ndef clear(btn):\n    print \"clear: %s\" % btn\n    {% for item in items %}\n    {% if item.type == \"string\" -%}\n    app.setEntry(\"{{ item.label }}\", \"\")\n    {%- endif %}\n    {% if item.type == \"text\" -%}\n    app.clearTextArea(\"{{ item.label }}\")\n    {% endif %}\n    {% endfor %}\n\n\napp.addButton(\"\u6e05\u9664\", clear)\n\n\ndef delete(btn):\n    print \"delete: %s\" % btn\n    {{ name }} = {{ name }}s.get({{ name | capitalize }}.name == app.getEntry(\"\u540d\u79f0\"))\n    if {{ name }}:\n        {{ name }}s.remove(doc_ids=[{{ name }}.doc_id])\n        app.updateListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\n\n\napp.addButton(\"\u5220\u9664\", delete)\n\napp.stopLabelFrame()\napp.go()\n\n\n", "name": "appjar\u589e\u5220\u67e5\u65392"}, "2": {"content": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# init sys to utf-8\nimport sys\n\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\nfrom tinydb import TinyDB, Query\n\n# init db\ndb = TinyDB('{{ database }}.json')\n# init table\n{{ name }}s = db.table('{{ name }}')\n{{ name | capitalize }}= Query()\n\nfrom appJar import gui\n\n# init gui\napp = gui()\n\napp.startLabelFrame(\"{{ label }}\")\n\n\ndef edit(btn):\n    print \"edit: %s\" % btn, app.getListBox(btn)\n    if not app.getListBox(btn): return\n    name = app.getListBox(btn)[0]\n    {{ name }} = {{ name }}s.get({{ name | capitalize }}.name == name)\n    print {{ name }}\n    if {{ name }}:\n        {% for item in items %}\n        {% if item.type == \"string\" -%}\n        app.setEntry(\"{{ item.label }}\", {{ name }}[\"{{ item.name }}\"])\n        {%- endif %}\n        {% if item.type == \"text\" -%}\n        app.clearTextArea(\"{{ item.label }}\")\n        app.setTextArea(\"{{ item.label }}\", {{ name }}[\"{{ item.name }}\"])\n        {% endif %}\n        {% endfor %}\n\n\napp.addListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\napp.setListBoxSubmitFunction(\"{{ label }}\u5217\u8868\", edit)\n\n{% for item in items %}\n{% if item.type == \"string\" -%}\napp.addLabelEntry(\"{{ item.label }}\")\n{%- endif %}\n{% if item.type == \"text\" -%}\napp.addScrolledTextArea(\"{{ item.label }}\")\n{% endif %}\n{% endfor %}\n\n\ndef save(btn):\n    print \"save: %s\" % btn\n    {% for item in items %}\n    {% if item.type == \"string\" -%}\n    {{ item.name }} = app.getEntry(\"{{ item.label }}\")\n    {%- endif %}\n    {% if item.type == \"text\" -%}\n    {{ item.name }} = app.getTextArea(\"{{ item.label }}\")\n    {% endif %}\n    {% endfor %}\n\n\n    {{ name }} = {\n        {% for item in items -%}\n        \"{{ item.name }}\" : {{ item.name }}\n        {%- if not loop.last %},{% endif %}\n        {% endfor -%}\n    }\n\n\n    print {{ name }}\n    {{ name }}s.upsert({{ name }}, {{ name | capitalize }}.name == {{ name }}[\"name\"])\n    app.updateListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\n    print \"show all {{ name }}s:\"\n    for {{ name }} in {{ name }}s.all():\n        print {{ name }}\n\n\napp.addButton(\"\u4fdd\u5b58\", save)\n\n\ndef clear(btn):\n    print \"clear: %s\" % btn\n    {% for item in items %}\n    {% if item.type == \"string\" -%}\n    app.setEntry(\"{{ item.label }}\", \"\")\n    {%- endif %}\n    {% if item.type == \"text\" -%}\n    app.clearTextArea(\"{{ item.label }}\")\n    {% endif %}\n    {% endfor %}\n\napp.addButton(\"\u6e05\u9664\", clear)\n\n\ndef delete(btn):\n    print \"delete: %s\" % btn\n    {{ name }} = {{ name }}s.get({{ name | capitalize }}.name == app.getEntry(\"\u540d\u79f0\"))\n    if {{ name }}:\n        {{ name }}s.remove(doc_ids=[{{ name }}.doc_id])\n        app.updateListBox(\"{{ label }}\u5217\u8868\", [{{ name }}[\"name\"] for {{ name }} in {{ name }}s.all()])\n\n\napp.addButton(\"\u5220\u9664\", delete)\n\napp.stopLabelFrame()\napp.go()\n\n\n\n", "name": "appjar\u589e\u5220\u67e5\u6539"}}, "config": {"1": {"name": "path", "value": "E:/workspace/python/novelapp/core"}, "2": {"name": "database", "value": "core"}}, "model": {"3": {"content": "name: tpl\nlabel: \u6a21\u7248\ndoc: \u6a21\u578b\nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: content\n  label: \u5185\u5bb9\n  type: text\n  doc:\n\n\n \n", "name": "\u6a21\u7248"}, "2": {"content": "name: model\nlabel: \u6a21\u578b\ndoc: \u6a21\u578b\nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: content\n  label: \u5185\u5bb9\n  type: text\n  doc:\n\n\n \n", "name": "\u6a21\u578b"}, "5": {"content": "name: power\nlabel: \u52bf\u529b\ndoc: \nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: boss\n  label: \u8001\u5927\n  type: string\n  doc:\n- name: level\n  label: \u7ea7\u522b\n  type: string\n  doc: \u7528\u6570\u503c\u5206\u6bb5\uff0c\u4f8b\u59821\u4ee3\u8868\u5c0f\u52bf\u529b\uff0c9\u4ee3\u8868\u5de8\u65e0\u9738\n- name: parent\n  label: \u7238\u7238\n  type: string\n  doc: \u4e0a\u7ea7\u52bf\u529b\n- name: leg\n  label: \u5927\u817f\n  type: string\n  doc: \u9760\u5c71\u52bf\u529b\n\n\n\n\n \n", "name": "\u52bf\u529b"}, "4": {"content": "name: person\nlabel: \u4eba\u7269\ndoc: \u4eba\u7269\nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: power\n  label: \u52bf\u529b\n  type: string\n  doc:\n- name: level\n  label: \u7ea7\u522b\n  type: string\n  doc: \u7528\u6570\u503c\u5206\u6bb5\uff0c1-3\u662f\u7ec3\u6c14\u524d\u4e2d\u540e\u671f\n- name: personality\n  label: \u4eba\u683c\n  type: string\n  doc:\n\n\n\n\n \n", "name": "\u4eba\u7269"}, "7": {"content": "name: magic_weapon\nlabel: \u6cd5\u5b9d\ndoc: \u6b66\u5668\u548c\u6cd5\u5b9d\uff0c\u6cd5\u5b9d\u5347\u7ea7\u540e\u53d8\u540d\u5b57\uff1f\nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: power\n  label: \u6240\u5c5e\u52bf\u529b\n  type: string\n  doc: \u53ef\u80fd\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u52bf\u529b\n- name: level\n  label: \u7ea7\u522b\n  type: string\n  doc: \u7528\u6570\u503c\u5206\u6bb5\uff0c\u4f8b\u59821\u4ee3\u8868\u5783\u573e\u6b66\u5668\uff0c9\u4ee3\u8868\u7edd\u4e16\u6cd5\u5b9d\n- name: find_desc\n  label: \u53d1\u73b0\u63cf\u8ff0\n  type: string\n  doc: \u53d1\u73b0\u6cd5\u5b9d\u7684\u5916\u89c2\u63cf\u8ff0\uff0c\u6837\u5b50\n- name: use_desc\n  label: \u4f7f\u7528\u63cf\u8ff0\n  type: string\n  doc: \u4f7f\u7528\u6cd5\u5b9d\u7684\u6837\u5b50\n \n", "name": "\u6cd5\u5b9d"}, "6": {"content": "name: magic\nlabel: \u529f\u6cd5\ndoc: \nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc:\n- name: power\n  label: \u6240\u5c5e\u52bf\u529b\n  type: string\n  doc: \u53ef\u80fd\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u52bf\u529b\n- name: level\n  label: \u7ea7\u522b\n  type: string\n  doc: \u7528\u6570\u503c\u5206\u6bb5\uff0c\u4f8b\u59821\u4ee3\u8868\u5783\u573e\u529f\u6cd5\uff0c9\u4ee3\u8868\u7edd\u4e16\u529f\u6cd5\n- name: finddesc\n  label: \u53d1\u73b0\u63cf\u8ff0\n  type: string\n  doc: \u53d1\u73b0\u529f\u6cd5\u4e66\u7684\u63cf\u8ff0\uff0c\u6837\u5b50\n- name: desc\n  label: \u529f\u6cd5\u63cf\u8ff0\n  type: string\n  doc: \u4f7f\u7528\u529f\u6cd5\u7684\u6837\u5b50\n \n", "name": "\u529f\u6cd5"}, "8": {"content": "name: savvy\nlabel: \u609f\u6027\ndoc: \u609f\u6027/\u8d44\u8d28/\u7406\u89e3\u529b\nitems:\n- name: name\n  label: \u540d\u79f0\n  type: string\n  doc: \u609f\u6027\u7684\u540d\u79f0\uff0c\u5982\u7edd\u4e16\u5929\u624d\uff0c\u751f\u800c\u77e5\u4e4b\uff0c\u7eb5\u8d2f\u5b87\u5b99\u7b49\n- name: score\n  label: \u5206\u6570\u7ebf\n  type: string\n  doc: \u5206\u6570\u7ebf\uff0c\u9ad8\u4e8e\u6b64\u7ebf\u5373\u53ef\u8bc4\u5b9a\n- name: level\n  label: \u7ea7\u522b\n  type: string\n  doc: \u7528\u6570\u503c\u5206\u6bb5\uff0c\u4f8b\u59821\u4ee3\u8868\u6700\u4f4e\uff0c9\u4ee3\u8868\u6700\u9ad8\uff0c\u548c\u5206\u6570\u662f\u5bf9\u5e94\u7684\n- name: desc\n  label: \u63cf\u8ff0\n  type: string\n  doc: \u5bf9\u8fd9\u79cd\u8d44\u8d28\u7684\u63cf\u8ff0\n\n \n", "name": "\u609f\u6027"}}}